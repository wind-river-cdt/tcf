<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

<!-- Common navigator contributions -->
   <extension point="org.eclipse.ui.navigator.viewer">
      <viewerContentBinding viewerId="org.eclipse.tcf.te.ui.views.View">
         <includes>
            <contentExtension
                  pattern="org.eclipse.tcf.te.tcf.filesystem.navigator.*"/>
         </includes>
      </viewerContentBinding>
      <dragAssistant
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.dnd.FSDragAdapterAssistant"
            viewerId="org.eclipse.tcf.te.ui.views.View">
      </dragAssistant>
   </extension>
   
   <extension point="org.eclipse.ui.navigator.navigatorContent">
      <navigatorContent
            activeByDefault="false"
            contentProvider="org.eclipse.tcf.te.tcf.filesystem.ui.controls.FSNavigatorContentProvider"
            icon="icons/obj16/root.gif"
            id="org.eclipse.tcf.te.tcf.filesystem.navigator.content"
            labelProvider="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.FSTreeElementLabelProvider"
            name="%navigatorContent.name"
            priority="normal">
            <triggerPoints>
               <instanceof
                     value="org.eclipse.tcf.te.tcf.locator.interfaces.nodes.IPeerModel">
               </instanceof>
                <test
                      property="org.eclipse.tcf.te.tcf.locator.hasRemoteService"
                      value="FileSystem">
                </test>
            </triggerPoints>
            <possibleChildren>
            	<instanceof value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode"/>
            </possibleChildren>
            <commonSorter
                  class="org.eclipse.tcf.te.tcf.filesystem.ui.controls.FSTreeViewerSorter"
                  id="org.eclipse.tcf.te.tcf.filesystem.navigator.sorter">
            </commonSorter>
            <dropAssistant
                  class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.dnd.FSDropAdapterAssistant"
                  id="org.eclipse.tcf.te.tcf.filesystem.dropAssistant">
               <possibleDropTargets>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof></possibleDropTargets>
            </dropAssistant>
            <commonWizard
                  type="new"
                  wizardId="org.eclipse.tcf.te.tcf.filesystem.wizards.NewFileWizard">
               <enablement>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isDirectory">
                  </test>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWritable">
                  </test></enablement>
            </commonWizard>
            <commonWizard
                  type="new"
                  wizardId="org.eclipse.tcf.te.tcf.filesystem.wizards.NewFolderWizard">
               <enablement>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isDirectory">
                  </test>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWritable">
                  </test>
               </enablement>
            </commonWizard>
      </navigatorContent>
      <commonFilter
            activeByDefault="true"
            class="org.eclipse.tcf.te.tcf.filesystem.ui.filters.HiddenFilesViewerFilter"
            id="org.eclipse.tcf.te.tcf.filesystem.navigator.filter.hiddenFiles"
            name="%FSTreeViewerFilter.hiddenFiles"
            visibleInUI="true">
      </commonFilter>
      <commonFilter
            activeByDefault="true"
            class="org.eclipse.tcf.te.tcf.filesystem.ui.filters.SystemFilesViewerFilter"
            id="org.eclipse.tcf.te.tcf.filesystem.navigator.filter.systemFiles"
            name="%FSTreeViewerFilter.systemFiles"
            visibleInUI="true">
      </commonFilter>
   </extension>

<!-- Editor page contributions -->
   <extension point="org.eclipse.tcf.te.ui.views.editorPages">
      <editorPage
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.pages.FSExplorerEditorPage"
            icon="icons/obj16/root.gif"
            id="org.eclipse.tcf.te.tcf.filesystem.FSExplorerEditorPage"
            name="%FSExplorerEditorPage.name">
      </editorPage>
   </extension>

<!-- Editor page binding contributions -->
   <extension point="org.eclipse.tcf.te.ui.views.editorPageBindings">
      <editorPageBinding
            id="org.eclipse.tcf.te.tcf.filesystem.binding.FSExplorerEditorPage"
            pageId="org.eclipse.tcf.te.tcf.filesystem.FSExplorerEditorPage">
         <enablement>
            <with variable="activeEditorInput">
               <and>
                  <instanceof value="org.eclipse.tcf.te.tcf.locator.interfaces.nodes.IPeerModel"/>
                  <test property="org.eclipse.tcf.te.tcf.locator.hasRemoteService" value="FileSystem"/>
                  <test
                        property="org.eclipse.tcf.te.runtime.preference"
                        args="bundleId=org.eclipse.tcf.te.tcf.filesystem.ui,key=te.tcf.filesystem.core.feature.editor.content.enable"
                        value="true">
                  </test>
               </and>
            </with>
         </enablement>
      </editorPageBinding>
   </extension>
   
<!-- Menu contributions -->
   <extension point="org.eclipse.ui.menus">
      <menuContribution locationURI="popup:org.eclipse.tcf.te.tcf.filesystem.FSExplorerEditorPage?after=additions">
         <separator
               name="group.new">
         </separator>
         <menu
               label="%menu.new.label">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
            <command
                  commandId="org.eclipse.tcf.te.tcf.filesystem.commands.newFile"
                  helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_NewFile"
                  icon="icons/obj16/newfile_wiz.gif"
                  label="%command.newfile.label"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.tcf.te.tcf.filesystem.commands.newFolder"
                  helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_NewFolder"
                  icon="icons/obj16/newfolder_wiz.gif"
                  label="%command.newfolder.label"
                  style="push">
            </command>
         </menu>
         <separator name="group.open" visible="true"/>
         <command
               commandId="org.eclipse.ui.navigator.Open"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Open"
               id="open"
               label="%fsmenu.open.label"
               style="push">
            <visibleWhen checkEnabled="false">
               <with variable="selection">
                  <count value="1"/>
                  <iterate>
                     <instanceof value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode"/>
                     <test property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile"/>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadable">
                     </test>
                     <not>
                        <test property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isBinaryFile"/>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="group.openWith">
         </separator>
         <menu
               label="%menu.label.openwith">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadable">
                     </test>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isBinaryFile">
                        </test>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
            <dynamic
                  class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.OpenWithContribution"
                  id="openWithMenu">
            </dynamic>
         </menu>
         <separator
               name="group.edit"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.ui.edit.cut"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Cut"
               icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/cut_edit.gif"
               id="cut"
               label="%command.label.cut"
               mnemonic="t"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.ui.edit.copy"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Copy"
               icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/copy_edit.gif"
               id="copy"
               label="%command.label.copy"
               mnemonic="C"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.ui.edit.paste"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Paste"
               icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/paste_edit.gif"
               id="paste"
               label="%command.label.paste"
               mnemonic="P"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="group.delete">
         </separator>
         <command
               commandId="org.eclipse.ui.edit.delete"
               disabledIcon="platform:/plugin/org.eclipse.ui/icons/full/dtool16/delete.gif"
               helpContextId="org.eclipse.tcf.te.ui.command_Delete"
               icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/delete.gif"
               id="org.eclipse.tcf.te.ui.commands.delete"
               label="%command.label.delete"
               mnemonic="D"
               style="push"
               tooltip="%command.delete.description">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="group.refresh"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.tcf.te.ui.command.refresh"
               id="org.eclipse.tcf.te.ui.commands.refresh"
               label="%fsmenu.refresh.label"
               mnemonic="f"
               style="push"
               tooltip="%command.refresh.tooltip">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="group.syncop"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.tcf.te.tcf.filesystem.commands.update"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Update"
               id="update"
               label="%fsmenu.update.label"
               style="push">
            <visibleWhen
                  checkEnabled="false">
                  <and>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                  </iterate>
               </with>
                <not>
                   <test
                         property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                   </test>
                </not>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.tcf.te.tcf.filesystem.commands.commit"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Commit"
               id="commit"
               label="%fsmenu.commit.label"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                  </iterate>
               </with>
                <not>
                   <test
                         property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                   </test>
                </not>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.tcf.te.tcf.filesystem.commands.merge"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Merge"
               id="merge"
               label="%fsmenu.merge.label"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                  </iterate>
               </with>
                <not>
                   <test
                         property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                   </test>
                </not>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.tcf.te.tcf.filesystem.commands.revert"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Revert"
               id="revert"
               label="%fsmenu.revert.label"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                  </iterate>
               </with>
                <not>
                   <test
                         property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                   </test>
                </not>
               </and>
            </visibleWhen>
         </command>
         <separator
               name="group.operations"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.ui.edit.rename"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Rename"
               id="rename"
               label="%command.label.rename"
               mnemonic="R"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.ui.edit.move"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Move"
               id="move"
               label="%command.label.move"
               mnemonic="M"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <separator
               name="group.search"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.tcf.te.ui.views.command.find"
               label="%command.search.label"
               style="push">
         </command>
         <separator name="group.properties" visible="true"/>
         <command
               commandId="org.eclipse.ui.file.properties"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Properties"
               id="properties"
               label="%PropertiesAction.label"
               tooltip="%PropertiesAction.tooltip">
               <visibleWhen>
                  <with variable="selection">
                     <count value="1"/>
                     <iterate operator="and" ifEmpty="false">
                        <and>
                           <instanceof
                                 value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                           </instanceof>
                           <not>
                              <test
                                    property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                              </test>
                           </not>
                        </and>
                     </iterate>
                  </with>
               </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.open">
         <command
               commandId="org.eclipse.ui.navigator.Open"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Open"
               id="open"
               label="%temenu.open.label"
               style="push">
            <visibleWhen checkEnabled="false">
               <with variable="selection">
                  <count value="1"/>
                  <iterate>
                     <instanceof value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode"/>
                     <test property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile"/>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadable">
                     </test>
                     <not>
                        <test property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isBinaryFile"/>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.openWith">
         <menu
               label="%menu.label.openwith">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadable">
                     </test>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isBinaryFile">
                        </test>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
            <dynamic
                  class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.OpenWithContribution"
                  id="openWithMenu">
            </dynamic>
         </menu>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.edit">
         <command
               commandId="org.eclipse.ui.edit.cut"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Cut"
               icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/cut_edit.gif"
               id="cut"
               label="%command.label.cut.1"
               mnemonic="t"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                        </test>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.ui.edit.copy"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Copy"
               icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/copy_edit.gif"
               id="copy"
               label="%command.label.copy.1"
               mnemonic="C"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                        </test>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.ui.edit.paste"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Paste"
               icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/paste_edit.gif"
               id="paste"
               label="%command.label.paste.1"
               mnemonic="P"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                        </test>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.delete">
         <command
               commandId="org.eclipse.ui.edit.delete"
               disabledIcon="platform:/plugin/org.eclipse.ui/icons/full/dtool16/delete.gif"
               helpContextId="org.eclipse.tcf.te.ui.command_Delete"
               icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/delete.gif"
               id="org.eclipse.tcf.te.ui.commands.delete"
               label="%command.delete.label"
               mnemonic="D"
               style="push"
               tooltip="%command.delete.description">
            <visibleWhen checkEnabled="false">
               <with variable="selection">
                  <count value="+"/>
                  <iterate operator="and" ifEmpty="false">
                     <instanceof value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode"/>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                        </test>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.refresh">
         <command
               commandId="org.eclipse.tcf.te.ui.command.refresh"
               id="org.eclipse.tcf.te.ui.commands.refresh"
               label="%fsmenu.refresh.label"
               mnemonic="f"
               style="push"
               tooltip="%command.refresh.tooltip">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.syncop">
         <command
               commandId="org.eclipse.tcf.te.tcf.filesystem.commands.update"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Update"
               id="update"
               label="%temenu.update.label"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <instanceof
                              value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                        </instanceof>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                        </test>
                     </iterate>
                  </with>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                     </test>
                  </not>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.tcf.te.tcf.filesystem.commands.commit"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Commit"
               id="commit"
               label="%temenu.commit.label"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <instanceof
                              value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                        </instanceof>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                        </test>
                     </iterate>
                  </with>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                     </test>
                  </not>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.tcf.te.tcf.filesystem.commands.merge"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Merge"
               id="merge"
               label="%temenu.merge.label"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <instanceof
                              value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                        </instanceof>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                        </test>
                     </iterate>
                  </with>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                     </test>
                  </not>
               </and>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.tcf.te.tcf.filesystem.commands.revert"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Revert"
               id="revert"
               label="%temenu.revert.label"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="selection">
                     <count
                           value="1">
                     </count>
                     <iterate>
                        <instanceof
                              value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                        </instanceof>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                        </test>
                     </iterate>
                  </with>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                     </test>
                  </not>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.operations">
         <command
               commandId="org.eclipse.ui.edit.rename"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Rename"
               id="rename"
               label="%command.label.rename.1"
               mnemonic="R"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                        </test>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
         <command
               commandId="org.eclipse.ui.edit.move"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Move"
               id="move"
               label="%command.label.move.1"
               mnemonic="M"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                        </test>
                     </not>
                  </iterate>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
      
      <menuContribution locationURI="popup:org.eclipse.tcf.te.ui.views.View#Popup?after=group.properties">
         <command
               commandId="org.eclipse.ui.file.properties"
               helpContextId="org.eclipse.tcf.te.tcf.filesystem.command_Properties"
               id="properties"
               label="%PropertiesAction.label"
               tooltip="%PropertiesAction.tooltip">
               <visibleWhen>
                  <with variable="selection">
                     <count value="1"/>
                     <iterate operator="and" ifEmpty="false">
                        <and>
                           <instanceof
                                 value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                           </instanceof>
                           <not>
                              <test
                                    property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                              </test>
                           </not>
                        </and>
                     </iterate>
                  </with>
               </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="toolbar:org.eclipse.tcf.te.tcf.filesystem.FSExplorerEditorPage?before=additions">
         <command
               commandId="org.eclipse.tcf.te.tcf.filesystem.commands.refreshViewer"
               icon="icons/obj16/refresh.gif"
               label="%command.refreshViewer.label"
               style="push"
               tooltip="%command.refreshViewer.tooltip">
         </command>
      </menuContribution>
   </extension>
   
<!-- Property page contributions -->   
   <extension point="org.eclipse.ui.propertyPages">
      <page
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.properties.GeneralInformationPage"
            id="org.eclipse.tcf.te.tcf.filesystem.pages.basic"
            name="%GeneralInformationPage.name">
         <enabledWhen>
            <and>
               <instanceof
                     value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
               </instanceof>
               <not>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                  </test>
               </not>
            </and>
         </enabledWhen>
      </page>
   </extension>
   
<!-- Property tester contributions -->   
   <extension point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.testers.CachePropertyTester"
            id="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache"
            namespace="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache"
            properties="isAutoSavingOn"
            type="java.lang.Object">
      </propertyTester>
      <propertyTester
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.testers.ClipboardPropertyTester"
            id="org.eclipse.tcf.te.tcf.filesystem.propertytester.clipboard"
            namespace="org.eclipse.tcf.te.tcf.filesystem.propertytester.clipboard"
            properties="canPaste"
            type="org.eclipse.jface.viewers.IStructuredSelection">
      </propertyTester>
      <propertyTester
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.testers.EditorActivationEventPropertyTester"
            id="org.eclipse.tcf.te.tcf.filesystem.propertytester.event"
            namespace="org.eclipse.tcf.te.tcf.filesystem.propertytester.event"
            properties="isEditorActivation"
            type="org.eclipse.jface.viewers.ColumnViewerEditorActivationEvent">
      </propertyTester>
   </extension>
   
<!-- Command contributions -->
   <extension point="org.eclipse.ui.commands">
      <command
            id="org.eclipse.tcf.te.tcf.filesystem.commands.update"
            name="%command.update.name">
      </command>
      <command
            id="org.eclipse.tcf.te.tcf.filesystem.commands.commit"
            name="%command.commit.name">
      </command>
      <command
            id="org.eclipse.tcf.te.tcf.filesystem.commands.merge"
            name="%command.merge.name">
      </command>
      <command
            id="org.eclipse.tcf.te.tcf.filesystem.commands.revert"
            name="%command.revert.name">
      </command>
      <command
            id="org.eclipse.tcf.te.tcf.filesystem.commands.newFile"
            name="%command.newfile.name">
      </command>
      <command
            id="org.eclipse.tcf.te.tcf.filesystem.commands.newFolder"
            name="%command.newfolder.name">
      </command>
      <command
            id="org.eclipse.tcf.te.tcf.filesystem.commands.refreshViewer"
            name="%command.refreshViewer.name">
      </command>
   </extension>

<!-- Command handler contributions -->
   <extension point="org.eclipse.ui.handlers">
      <!-- This handler contribution is for the double click behaviour in the
           Target Explore tree view -->
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.OpenFileHandler"
            commandId="org.eclipse.ui.navigator.Open">
         <activeWhen>
            <and>
               <with
                     variable="activePartId">
                  <or>
                     <equals
                           value="org.eclipse.tcf.te.ui.views.View">
                     </equals>
                     <equals
                           value="org.eclipse.tcf.te.ui.views.Editor">
                     </equals>
                  </or>
               </with>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           forcePluginActivation="true"
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                     <test
                           forcePluginActivation="true"
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadable">
                     </test>
                     <not>
                        <test
                              forcePluginActivation="true"
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isBinaryFile">
                        </test>
                     </not>
                  </iterate>
               </with>
            </and>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <test
                        forcePluginActivation="true"
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                  </test>
                  <test
                        forcePluginActivation="true"
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadable">
                  </test>
                  <not>
                     <test
                           forcePluginActivation="true"
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isBinaryFile">
                     </test>
                  </not>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.UpdateHandler"
            commandId="org.eclipse.tcf.te.tcf.filesystem.commands.update">
         <activeWhen>
            <with
                  variable="activePartId">
               <or>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.View">
                  </equals>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </or>
            </with>
         </activeWhen>
         <enabledWhen>
            <and>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.getCacheState"
                           value="outdated">
                     </test>
                  </iterate>
               </with>
               <not>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                  </test>
               </not>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.CommitHandler"
            commandId="org.eclipse.tcf.te.tcf.filesystem.commands.commit">
         <activeWhen>
            <with
                  variable="activePartId">
               <or>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.View">
                  </equals>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </or>
            </with>
         </activeWhen>
         <enabledWhen>
            <and>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.getCacheState"
                           value="modified">
                     </test>
                  </iterate>
               </with>
               <not>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                  </test>
               </not>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.MergeHandler"
            commandId="org.eclipse.tcf.te.tcf.filesystem.commands.merge">
         <activeWhen>
            <with
                  variable="activePartId">
               <or>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.View">
                  </equals>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </or>
            </with>
         </activeWhen>
         <enabledWhen>
            <and>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.getCacheState"
                           value="conflict">
                     </test>
                  </iterate>
               </with>
               <not>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                  </test>
               </not>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.UpdateHandler"
            commandId="org.eclipse.tcf.te.tcf.filesystem.commands.revert">
         <activeWhen>
            <with
                  variable="activePartId">
               <or>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.View">
                  </equals>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </or>
            </with>
         </activeWhen>
         <enabledWhen>
            <and>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                     <or>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.getCacheState"
                              value="modified">
                        </test>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.getCacheState"
                              value="conflict">
                        </test>
                     </or>
                  </iterate>
               </with>
               <not>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.cache.isAutoSavingOn">
                  </test>
               </not>
            </and>
         </enabledWhen>
      </handler>
      
      
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.CutFilesHandler"
            commandId="org.eclipse.ui.edit.cut">
         <activeWhen>
            <with
                  variable="activePartId">
               <or>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.View">
                  </equals>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </or>
            </with>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="+">
               </count>
               <iterate>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isRoot">
                     </test>
                  </not>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                     </test>
                  </not>
                  <or>
                     <and>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWindows">
                        </test>
                        <not>
                           <test
                                 property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadOnly">
                           </test>
                        </not>
                     </and>
                     <and>
                        <not>
                           <test
                                 property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWindows">
                           </test>
                        </not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWritable">
                        </test>
                     </and>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.CopyFilesHandler"
            commandId="org.eclipse.ui.edit.copy">
         <activeWhen>
            <with
                  variable="activePartId">
               <or>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.View">
                  </equals>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </or>
            </with>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="+">
               </count>
               <iterate>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadable">
                  </test>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isRoot">
                     </test>
                  </not>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                     </test>
                  </not>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.PasteFilesHandler"
            commandId="org.eclipse.ui.edit.paste">
         <activeWhen>
            <with
                  variable="activePartId">
               <or>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.View">
                  </equals>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </or>
            </with>
         </activeWhen>
         <enabledWhen>
         <and>
            <with
                  variable="selection">
               <count
                     value="+">
               </count>
               <iterate>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                     </test>
                  </not>
               </iterate>
               <test
                     property="org.eclipse.tcf.te.tcf.filesystem.propertytester.clipboard.canPaste">
               </test>
            </with>
         </and>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.MoveFilesHandler"
            commandId="org.eclipse.ui.edit.move">
         <activeWhen>
            <with
                  variable="activePartId">
               <or>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.View">
                  </equals>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </or>
            </with>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="+">
               </count>
               <iterate>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                     </test>
                  </not>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isRoot">
                     </test>
                  </not>
                  <or>
                     <and>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWindows">
                        </test>
                        <not>
                           <test
                                 property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadOnly">
                           </test>
                        </not>
                     </and>
                     <and>
                        <not>
                           <test
                                 property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWindows">
                           </test>
                        </not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWritable">
                        </test>
                     </and>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.RenameFilesHandler"
            commandId="org.eclipse.ui.edit.rename">
         <activeWhen>
            <with
                  variable="activePartId">
               <or>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.View">
                  </equals>
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </or>
            </with>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                     </test>
                  </not>
                  <not>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isRoot">
                     </test>
                  </not>
                  <or>
                     <and>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWindows">
                        </test>
                        <not>
                           <test
                                 property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadOnly">
                           </test>
                        </not>
                     </and>
                     <and>
                        <not>
                           <test
                                 property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWindows">
                           </test>
                        </not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWritable">
                        </test>
                     </and>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.NewFileHandler"
            commandId="org.eclipse.tcf.te.tcf.filesystem.commands.newFile">
         <activeWhen>
               <with
                     variable="activePartId">
                  <equals
                        value="org.eclipse.tcf.te.ui.views.Editor">
                  </equals>
               </with>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <or>
                     <and>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isDirectory">
                        </test>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWritable">
                        </test>
                     </and>
                     <and>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                        </test>
                        <test
                              args="isWritable"
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.testParent">
                        </test>
                     </and>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.NewFolderHandler"
            commandId="org.eclipse.tcf.te.tcf.filesystem.commands.newFolder">
         <activeWhen>
            <with
                  variable="activePartId">
               <equals
                     value="org.eclipse.tcf.te.ui.views.Editor">
               </equals>
            </with>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="1">
               </count>
               <iterate>
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <or>
                     <and>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isDirectory">
                        </test>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWritable">
                        </test>
                     </and>
                     <and>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                        </test>
                        <test
                              args="isWritable"
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.testParent">
                        </test>
                     </and>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.RefreshViewerHandler"
            commandId="org.eclipse.tcf.te.tcf.filesystem.commands.refreshViewer">
      </handler>

      <handler
            commandId="org.eclipse.ui.edit.delete"
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.DeleteHandler">
            <activeWhen>
               <and>
                  <with variable="activePartId">
                     <or>
                        <equals value="org.eclipse.tcf.te.ui.views.View"/>
                        <equals value="org.eclipse.tcf.te.ui.views.Editor"/>
                     </or>
                  </with>
                  <with variable="selection">
                     <iterate operator="and" ifEmpty="false">
                        <instanceof value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode"/>
                     </iterate>
                  </with>
               </and>
            </activeWhen>
            <enabledWhen>
               <with variable="selection">
                  <count
                        value="+">
                  </count>
                  <iterate operator="and" ifEmpty="false">
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                        </test>
                     </not>
                     <not>
                        <test
                              property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isRoot">
                        </test>
                     </not>
                     <or>
                        <and>
                           <test
                                 property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWindows">
                           </test>
                           <not>
                              <test
                                    property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isReadOnly">
                              </test>
                           </not>
                        </and>
                        <and>
                           <not>
                              <test
                                    property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWindows">
                              </test>
                           </not>
                           <test
                                 property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isWritable">
                           </test>
                        </and>
                     </or>
                  </iterate>
               </with>
            </enabledWhen>
      </handler>
      <handler
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.handlers.RefreshHandler"
            commandId="org.eclipse.tcf.te.ui.command.refresh">
         <activeWhen>
            <and>
               <with
                     variable="activePartId">
                  <or>
                     <equals
                           value="org.eclipse.tcf.te.ui.views.View">
                     </equals>
                     <equals
                           value="org.eclipse.tcf.te.ui.views.Editor">
                     </equals>
                  </or>
               </with>
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
            </and>
         </activeWhen>
         <enabledWhen>
            <with
                  variable="selection">
               <count
                     value="+">
               </count>
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <instanceof
                        value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                  </instanceof>
                  <or>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isSystemRoot">
                     </test>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isRoot">
                     </test>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isDirectory">
                     </test>
                     <test
                           property="org.eclipse.tcf.te.tcf.filesystem.propertytester.treenode.isFile">
                     </test>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>

   </extension>
   
<!-- Decorator contributions -->
   <extension point="org.eclipse.ui.decorators">
      <decorator
            icon="icons/ovr/ovr_modified.png"
            id="org.eclipse.tcf.te.tcf.filesystem.decorators.modified"
            label="%decorator.modified.label"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="cache.state"
                  value="modified">
            </objectState>
         </enablement>
      </decorator>
      <decorator
            icon="icons/ovr/ovr_outdated.png"
            id="org.eclipse.tcf.te.tcf.filesystem.decorators.outdated"
            label="%decorator.outdated.label"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="cache.state"
                  value="outdated">
            </objectState>
         </enablement>
      </decorator>
      <decorator
            icon="icons/ovr/ovr_conflict.png"
            id="org.eclipse.tcf.te.tcf.filesystem.decorators.conflict"
            label="%decorator.conflict.label"
            lightweight="true"
            location="TOP_RIGHT"
            state="true">
         <enablement>
            <objectState
                  name="cache.state"
                  value="conflict">
            </objectState>
         </enablement>
      </decorator>
      <decorator
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.decorators.PhantomDecorator"
            id="org.eclipse.tcf.te.tcf.filesystem.decorators.cut"
            label="%decorator.label.cut"
            state="true">
         <enablement>
            <objectState
                  name="edit.cut"
                  value="true">
            </objectState>
         </enablement>
      </decorator>
      <decorator
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.decorators.PhantomDecorator"
            id="org.eclipse.tcf.te.tcf.filesystem.decorators.hidden"
            label="%decorator.hidden.label"
            state="true">
         <enablement>
            <objectState
                  name="hidden"
                  value="true">
            </objectState>
         </enablement>
      </decorator>
   </extension>
   
<!-- Preference contributions -->
   <extension point="org.eclipse.core.runtime.preferences">
      <initializer class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.preferences.PreferencesInitializer"/>
   </extension>

<!-- Preference page contributions -->
   <extension point="org.eclipse.ui.preferencePages">
      <page
            category="org.eclipse.tcf.te.ui.preferences.general"
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.preferences.PreferencePage"
            id="org.eclipse.tcf.te.ui.preferences.tcf.filesystem"
            name="%preference.page.name">
      </page>
   </extension>
   
<!-- Adapter contributions -->   
   <extension point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode"
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.adapters.FSTreeNodeAdapterFactory">
         <adapter
               type="org.eclipse.ui.IActionFilter">
         </adapter>
         <adapter
               type="org.eclipse.jface.viewers.ILabelProvider">
         </adapter>
         <adapter
               type="org.eclipse.ui.IPersistableElement">
         </adapter>
         <adapter
               type="org.eclipse.tcf.te.ui.interfaces.ILazyLoader">
         </adapter>
         <adapter
               type="org.eclipse.tcf.te.tcf.locator.interfaces.nodes.IPeerModel">
         </adapter>
         <adapter
               type="org.eclipse.tcf.te.ui.interfaces.ISearchable">
         </adapter>
      </factory>
      <factory
            adaptableType="org.eclipse.tcf.te.tcf.locator.interfaces.nodes.IPeerModel"
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.adapters.ViewerInputAdapterFactory">
         <adapter
               type="org.eclipse.tcf.te.core.interfaces.IViewerInput">
         </adapter>
         <adapter
               type="org.eclipse.tcf.te.core.interfaces.IPropertyChangeProvider">
         </adapter>
      </factory>
   </extension>

<!-- CellEditor factory contributions -->   
   <extension point="org.eclipse.tcf.te.ui.cellEditors">
      <cellEditor
            editorFactory="org.eclipse.tcf.te.tcf.filesystem.ui.internal.celleditor.FSViewerCellEditorFactory">
         <activation>
            <and>
               <with
                     variable="selection">
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <instanceof
                           value="org.eclipse.tcf.te.tcf.filesystem.core.model.FSTreeNode">
                     </instanceof>
                  </iterate>
               </with>
               <with
                     variable="event">
                  <test
                        property="org.eclipse.tcf.te.tcf.filesystem.propertytester.event.isEditorActivation">
                  </test>
               </with>
            </and>
         </activation>
         <contributeTo
               viewerId="org.eclipse.tcf.te.ui.views.View">
         </contributeTo>
         <contributeTo
               viewerId="org.eclipse.tcf.te.ui.controls.viewer.fs">
         </contributeTo>
      </cellEditor>
   </extension>

<!-- New wizard contributions -->   
   <extension point="org.eclipse.tcf.te.ui.newWizards">
      <wizard
            canFinishEarly="false"
            category="org.eclipse.tcf.te.tcf.ui.newWizards.category"
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.wizards.NewFileWizard"
            hasPages="true"
            icon="icons/obj16/newfile_wiz.gif"
            id="org.eclipse.tcf.te.tcf.filesystem.wizards.NewFileWizard"
            name="%newfile.wizard.name">
         <description>
            %newfile.wizard.description
         </description>
      </wizard>
      <wizard
            canFinishEarly="false"
            category="org.eclipse.tcf.te.tcf.ui.newWizards.category"
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.wizards.NewFolderWizard"
            hasPages="true"
            icon="icons/obj16/newfolder_wiz.gif"
            id="org.eclipse.tcf.te.tcf.filesystem.wizards.NewFolderWizard"
            name="%newfolder.wizard.name">
         <description>
            %newfolder.wizard.description
         </description>
      </wizard>
   </extension>
   
   <extension point="org.eclipse.tcf.te.ui.viewers">
       <viewer
             autoExpandLevel="0"
             contentProvider="org.eclipse.tcf.te.tcf.filesystem.ui.controls.FSTreeContentProvider"
             id="org.eclipse.tcf.te.ui.controls.viewer.fs"
             persistent="true">
          <creation>
             <style name="SWT.FULL_SELECTION" />
             <style name="SWT.MULTI" />
          </creation>
          <dragSupport
                class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.dnd.FSDragSourceListener">
             <operations>
             	<operation name="DND.DROP_COPY" />
             	<operation name="DND.DROP_MOVE" />
             	<operation name="DND.DROP_LINK" />
             </operations>
             <transferTypes>
             	<transferType name ="LocalSelectionTransfer" />
              <transferType
                    name="FileTransfer">
              </transferType>
			 </transferTypes>
          </dragSupport>
          <dropSupport
                class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.dnd.FSDropTargetListener">
             <operations>
             	<operation name="DND.DROP_COPY" />
             	<operation name="DND.DROP_MOVE" />
             	<operation name="DND.DROP_LINK" />
             </operations>
             <transferTypes>
             	<transferType name ="LocalSelectionTransfer" />
              <transferType
                    name="FileTransfer">
              </transferType>
			 </transferTypes>
          </dropSupport>
      </viewer>
      <columnContribution viewerId="org.eclipse.tcf.te.ui.controls.viewer.fs">
         <column
               alignment="SWT.LEFT"
               comparator="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.FSTreeElementComparator"
               id="name"
               labelProvider="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.FSTreeElementLabelProvider"
               moveable="true"
               name="%column.name.name"
               resizable="true"
               style="SWT.LEFT"
               visible="true"
               width="300">
         </column>
         <column
               alignment="SWT.RIGHT"
               comparator="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.SizeComparator"
               id="size"
               labelProvider="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.SizeLabelProvider"
               moveable="true"
               name="%column.name.size"
               resizable="true"
               style="SWT.RIGHT"
               visible="true"
               width="100">
         </column>
         <column
               alignment="SWT.LEFT"
               comparator="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.FileTypeComparator"
               id="type"
               labelProvider="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.FileTypeLabelProvider"
               moveable="true"
               name="%column.name.type"
               resizable="true"
               style="SWT.LEFT"
               visible="false"
               width="100">
         </column>
         <column
               alignment="SWT.RIGHT"
               comparator="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.ModificationTimeComparator"
               id="modified"
               labelProvider="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.ModificationTimeLabelProvider"
               moveable="true"
               name="%column.name.modified"
               resizable="true"
               style="SWT.RIGHT"
               visible="true"
               width="120">
         </column>
         <column
               alignment="SWT.RIGHT"
               comparator="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.AccessTimeComparator"
               id="accessed"
               labelProvider="org.eclipse.tcf.te.tcf.filesystem.ui.internal.columns.AccessTimeLabelProvider"
               moveable="true"
               name="%column.name.accessed"
               resizable="true"
               style="SWT.RIGHT"
               visible="false"
               width="120">
         </column>
      </columnContribution>
      
      <filterContribution viewerId="org.eclipse.tcf.te.ui.controls.viewer.fs">
         <filter
               class="org.eclipse.tcf.te.tcf.filesystem.ui.filters.HiddenFilesViewerFilter"
               description="%filter.description.hidden"
               enabled="true"
               id="org.eclipse.tcf.te.tcf.filesystem.navigator.filter.hiddenFiles"
               image="icons/obj16/hidden_file_filter.png"
               name="%filter.name.hidden"
               visibleInUI="true">
         </filter>
         <filter
               class="org.eclipse.tcf.te.tcf.filesystem.ui.filters.SystemFilesViewerFilter"
               description="%filter.description.system"
               enabled="true"
               id="org.eclipse.tcf.te.tcf.filesystem.navigator.filter.systemFiles"
               image="icons/obj16/system_file_filter.png"
               name="%filter.name.system"
               visibleInUI="true">
            <activation>
               <with variable="input">
                  <adapt type="org.eclipse.tcf.te.tcf.locator.interfaces.nodes.IPeerModel">
                     <test property="org.eclipse.tcf.te.tcf.filesystem.propertytester.peer.isWindows" />
                  </adapt>
               </with>
            </activation>
         </filter>
      </filterContribution>
   </extension>
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertyTabs">
      <propertyTabs
            contributorId="org.eclipse.tcf.te.ui">
         <propertyTab
               category="org.eclipse.tcf.te"
               id="org.eclipse.tcf.te.tcf.filesystem.propertytab.general"
               label="%propertyTab.general.label">
         </propertyTab>
         <propertyTab
               afterTab="org.eclipse.tcf.te.tcf.filesystem.propertytab.general"
               category="org.eclipse.tcf.te"
               id="org.eclipse.tcf.te.tcf.filesystem.propertytab.permissions"
               label="%propertyTab.permission.label">
         </propertyTab>
         <propertyTab
               afterTab="org.eclipse.tcf.te.tcf.filesystem.propertytab.general,org.eclipse.tcf.te.tcf.filesystem.propertytab.permissions"
               category="org.eclipse.tcf.te"
               id="org.eclipse.tcf.te.tcf.filesystem.propertytab.advanced"
               label="%propertyTab.advanced.label">
         </propertyTab>
      </propertyTabs>
   </extension>
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertySections">
      <propertySections
            contributorId="org.eclipse.tcf.te.ui">
         <propertySection
               class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.BasicFolderSection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.FolderFilter"
               id="org.eclipse.tcf.te.tcf.filesystem.propertysection.folder.basic"
               tab="org.eclipse.tcf.te.tcf.filesystem.propertytab.general">
         </propertySection>
         <propertySection
               class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.BasicFileSection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.FileFilter"
               id="org.eclipse.tcf.te.tcf.filesystem.propertysection.file.basic"
               tab="org.eclipse.tcf.te.tcf.filesystem.propertytab.general">
         </propertySection>
         <propertySection
               afterSection="org.eclipse.tcf.te.tcf.filesystem.propertysection.folder.basic,org.eclipse.tcf.te.tcf.filesystem.propertysection.file.basic"
               class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.WindowsAttributesSection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.WindowsFilter"
               id="org.eclipse.tcf.te.tcf.filesystem.propertysection.windows.attributes"
               tab="org.eclipse.tcf.te.tcf.filesystem.propertytab.general">
         </propertySection>
         <propertySection
               class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.LinuxPermissionsSection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.LinuxFilter"
               id="org.eclipse.tcf.te.tcf.filesystem.propertysection.linux.permissions"
               tab="org.eclipse.tcf.te.tcf.filesystem.propertytab.permissions">
         </propertySection>
         <propertySection
               class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.WindowsFolderAISection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.WindowsFolderFilter"
               id="org.eclipse.tcf.te.tcf.filesystem.propertysection.windows.folderAI"
               tab="org.eclipse.tcf.te.tcf.filesystem.propertytab.advanced">
         </propertySection>
         <propertySection
               class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.WindowsFileAISection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.WindowsFileFilter"
               id="org.eclipse.tcf.te.tcf.filesystem.propertysection.windows.fileAI"
               tab="org.eclipse.tcf.te.tcf.filesystem.propertytab.advanced">
         </propertySection>
         <propertySection
               afterSection="org.eclipse.tcf.te.tcf.filesystem.propertysection.windows.folderAI,"
               class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.WindowsAttributesCESection"
               enablesFor="1"
               filter="org.eclipse.tcf.te.tcf.filesystem.ui.internal.tabbed.WindowsFilter"
               id="org.eclipse.tcf.te.tcf.filesystem.propertysection.windows.attributesCE"
               tab="org.eclipse.tcf.te.tcf.filesystem.propertytab.advanced">
         </propertySection>
      </propertySections>
   </extension>
   <extension
         point="org.eclipse.ui.elementFactories">
      <factory
            class="org.eclipse.tcf.te.tcf.filesystem.ui.internal.adapters.FSTreeNodeFactory"
            id="org.eclipse.tcf.te.tcf.filesystem.ui.nodeFactory">
      </factory>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.eclipse.ui.navigator.Open"
            contextId="org.eclipse.tcf.te.ui.views.View"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="F3">
      </key>
      <key
            commandId="org.eclipse.ui.navigator.Open"
            contextId="org.eclipse.tcf.te.ui.views.Editor"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="F3">
      </key>
   </extension>   
</plugin>
